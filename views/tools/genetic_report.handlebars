<div class="jumbotron-gene-data">
  <h1 class="main-h1">Connect with 23andMe</h1>
</div>
<br>
<br>

<a href="https://api.23andme.com/authorize/?redirect_uri=https://localhost:3000/receive_code/&response_type=code&client_id=8c5bc3cd41932f405c80612248b7ae43&scope=basic rs121909205 rs62645958"><img src="/assets/images/23andMe.png"/> </a>

<script src="https://api.23andme.com/res/js/ttam-0.3.js"></script>


<script>


    if (!req.query.code) {
        res.render('error', {
            client_id: process.env.CLIENT_ID,
            scope: scope,
            redirect_uri: process.env.REDIRECT_URI
        });
    } else {
        // Exchange the code for a token,
        // store it in the session, and redirect.
        request.post({
            url: 'https://api.23andme.com/token/',
            form: {
                client_id: process.env.CLIENT_ID,
                client_secret: process.env.CLIENT_SECRET,
                grant_type: 'authorization_code',
                code: req.query.code,
                redirect_uri: process.env.REDIRECT_URI,
                scope: scope
            },
            json: true }, function(e, r, body) {
                if (!e && r.statusCode == 200) {
                    res.cookie('access_token', body.access_token, {signed: true});
                    res.redirect('/');
                } else {
                    res.send(body);
                }
            });
    }

</script>


<table id="gene-table" class="table table-striped">
  <thead>
    <tr>
      <th>Gene</th>
      <th>Marker (SNP)</th>
      <th>Genomic Position</th>
      <th>Variants</th>
      <th>Your Genotype</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">1</th>
      <td>Mark</td>
      <td>Otto</td>
      <td>@mdo</td>
      <td>@mdo</td>
    </tr>
    <tr>
      <th scope="row">2</th>
      <td>Jacob</td>
      <td>Thornton</td>
      <td>@fat</td>
      <td>@mdo</td>

    </tr>
    <tr>
      <th scope="row">3</th>
      <td>Larry</td>
      <td>the Bird</td>
      <td>@twitter</td>
      <td>@mdo</td>

    </tr>
  </tbody>
</table>